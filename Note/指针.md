# 指针

地址指向某一个特定的变量单元，将这个地址形象化地称为“指针”

每个变量都有地址，我们可以通过&得到变量地址

例子：printf（“%d”，&a）这便是通过&得到了a的十进制地址

**注意：指针是一个地址，指针变量本身是一个存放地址的变量，即指针变量的值即为指针，指针可以指向某种构造类型的变量，这样就可以访问到该类型变量中的任一元素。**

**另外，可以通过指针间接访问动态变量的某一个值。**

**定义指针**:

定义一般形式如下：

类型标识符 * 变量名（常用p）

注：“*”仅仅是一个符号，它表示该变量名为一个指针变量而不是指针运算符，如果没有这个符号，仅仅是一个普通变量

**初始化指针：**

方法1：先定义再赋值

方法2：在定义的同时赋值

**注意**：（1）未经赋值的指针不能使用，会导致程序崩溃

​              （2）给指针变量赋值**只能赋以地址值**，而**不能是其它任何类型的返回值，否则error**

例子：

```c
int a；
int *p1;//等价于int *p1=&a;
p1=&a;//此时指针变量p获得了变量a的内存地址，而*p才是a的值
或者
int a;
char *p2=&a;也是同样的效果


printf("%d ",*p)等价于printf（"%d",a);
```

使用指针变量：

指针有关的运算符有两种：&和*；

&*p等价于p，此时不是指针，而是普通变量

**指针的作用**：

1.需要传入较大的数据时用作参数；

2。传入数组后对数组做操作

3.函数返回不止一个结果，用指针来同时返回多个结果

4.需要用函数来修改不止一个变量时

**指针作函数参数**

```c
#include<stdio.h>//输入两个整数按大小输出。 
int main()
{
	void swap(int* p1, int* p2);
		int a, b;
	int* pointer_1, * pointer_2;
	printf("please input a and b:");
	scanf("%d %d", &a, &b);
	pointer_1 = &a;
	pointer_2 = &b;
	if (a < b) {
		swap(pointer_1, pointer_2);//用指针转换变量a，b得值
			printf("max=%d,min=%d\n", a, b);
	}
	return 0;
}
void swap(int* p1, int* p2)
{
	int temp;//注意*p1是一个具体的值，所以应该用temp=*p1，*temp是一个未知的东西，如果写成*temp=*p1，由于*temp没有初始化，所以就等于让*p1指向了一个未知的存储单元，会导致程序错误
	temp = *p1;
	*p1 = *p2;
	*p2 = temp;
}
```



**如果想通过函数调用得到n个要改变的值**，可以这样做：

1.在主函数中设n个变量，用n个指针变量指向它们；

2.设计一个函数，有n个指针形参。在这个函数中改变这n个形参的值

3.在主函数中调用这个函数，在调用时将这n个指针变量作实参，将它们的值传给该函数的形参

4.在执行函数过程中，通过形参指针变量，改变它所指向的n个变量的值；

| 类型     | 定义变量   | 数据类型   | 含义                                                         |
| -------- | ---------- | ---------- | ------------------------------------------------------------ |
| 指针数组 | int *p[4]  | int *[4]   | 定义一个指针数组p，数组由四个指向整型数据的指针元素组成（**数组里面有4个指针**） |
| 数组指针 | int(*p)[4] | int (*)[4] | 指针p指向int a[4]的首地址，数组里有4个int整型变量（**数组里面是整型变量**）其实（*p）[4]相当于一个二维数组 |

**数组指针**

```c
#include <stdio.h>
int main()
{
    int a[6][1] = {1,2,3,4,5,6};//定义整型数组a
    //定义一个数组指针b,
    int (*b)[1];
    b=a;//此时*b=a[6]，(*b)[1]=a[6][1]
    for(int j = 0;j <= 5;j++)

    printf("a = %d \n",(*b)[j]);//就相当于遍历二维数组a[6][1]
    return 0;
}
```

**指针数组**

```c
#include <stdio.h>

int main()
{
    int a, b, c;
    a = 1;
    b = 2;
    c = 3;
    int *p[3];
    p[0] = &a;//指针p[0]取a的地址
    p[1] = &b;//指针p[1]取b的地址
    p[2] = &c;//指针p[2]取c的地址
    printf("%d\n", *p[0]);
    printf("%d\n", *p[1]);
    printf("%d\n", *p[2]);
    return 0;
}
```



**所谓数组元素的指针就是数组元素的地址**

```c
int a[10]={1,2,3,4,5,6};
int *p=&a[0];//把a[0]的地址赋给指针p
可以用指针遍历数组：
for(i=0;i<=10;i++){
p++;//加减地址
printf("%d",*p)
}
便可以达到遍历数组的目的
可以改写为：
for(i=0;i<=10;i++){
printf("%d",*p++);
```

*p++等价于 *(p++)

  通过指针引用多维数组

```C
对于二维数组a【2】【3】如果用指针引用里面的数组
a【1】的值时&a【1】【0】
a【0】【1】的地址可以表示为&（a【0】+1）
因此*（a【0】+1）就是a[0][1]的值
```

**a【0】和 *（a+1）等价，所以a【0】【1】等价于 *（a+0）+1，都表示地址；**注意不要写成* a+0+1，**必须有括号**

若要表示二维数组某个值

| 表示形式                           | 含义                           | 值   |
| ---------------------------------- | ------------------------------ | ---- |
| a                                  | 二维数组名，指向一维数组a【0】 | 2000 |
| a[0],*(a+0), * a                   | 0行0列元素地址                 | 2000 |
| a+1，*（a+1）                      | 1行0列元素a【1】【0】的地址    | 2016 |
| a【1】+2，*（a+1）+2，&a【1】【2】 | 1行2列元素a【1】【2】的地址    | 2024 |
| *(a[1]+2), *( *(a+1)+2),a[1] [2]   | 1行2列元素a【1】【2】的值      |      |



指向多维数组元素的指针**

**指向数组元素的指针**



```c
#include<stdio.h>
int main()
{
	int a[3][4]={1,2,3,4,5,6,7,8,9,10,11,12};
	int *p;
	for(p=a[0];p<=a[0]+11;p++)//使用指针遍历二维数组
	{if(( p - a[0]) % 4 == 0)printf("\n");//每输出4个数换行
	printf("%4d",*p);
	}
	printf("\n");
	return 0;
 } 
```

int (*p)[4]此时p只能指向一个包含4个元素的一维数组，不能指向一维数组中的某个元素，p的值时该一维数组的起始地址

p是一维数组组指针变量，称为行指针。可以把某个二维数组名赋值给p，因为二维数组的分量是一维数组，二维数组名指向首个一位数组.int a[5] [4];p=&a[0];

**可以把某个二维数组的4个分量赋值p，因为二维数组的4个分量分别是一维数组的首地址**



**将指针用作函数参数**

```c
#include <stdio.h>//用指向函数的指针作函数参数
int main()
{
    int *swap(int *p1,int *p2);
    int p1=4,p2=5;
    //scanf("%d %d",p1,p2);
    *swap(&p1,&p2);
    printf("%d %d\n",p1,p2);
    return 0;
}
int *swap(int *p1,int*p2)
{
   int temp;
   temp = *p1;
   *p1 = *p2;
   *p2 =temp;
   return 0;
}
```

**字符指针**

```c
#include<stdio.h>
void main()
{
  char *string;
  string = "i love china";//把字符串的第一个元素的地址赋给字符指针变量
  printf("%s",string);
}
```

**字符指针传入函数**

```c
    #include<stdio.h>
    void main()
    {
    int fun(char *string);
    char string[]={"i love china"};
    char *p;
    p = string;
    fun(p);
    static char c='a';//在执行函数之后释放内存，防止出现“烫烫”的情况
    fun(&c);
    }
    int fun(char *string)
    {
        printf("%s\n",string);
       // *string = 0;
        return 0;
    }
```



**多重指针**（二级指针）

对于多重指针**p，其实相当于  *（ *p），用指针指向指针，用指针来取指针的地址

二级指针一般定义形式为：

**数据类型  * *指针变量名**

对指针取地址时需要用到二级指针

```c
    #include<stdio.h>
    int main()
    {
        int *p;//一级指针
        int **q;//二级指针用于存放指向一级指针的地址
        int a = 4;
        p = &a;
        q = &p;
        printf("%d\n",*p);
        printf("%d",**q);
        return 0;
    }
```

**可以利用多重指针来输出指针数组里的内容**

```c
#include<stdio.h>//多重指针的应用
void main()
{
    char *a[]={"loveyou","lovehe","he"};
    char **p;
    p = a;
    for(int i = 0;i <= 2;i++){
    printf("%s \n",*p);
    p++;
    }
}
输出结果：
loveyou
lovehe
he
```







