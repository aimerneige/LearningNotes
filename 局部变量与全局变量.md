# 局部变量与全局变量

#### 变量的存储方式

存储空间可分为3部分

（1）程序区

（2）静态存储区

（3）动态存储区



内存中供用户使用的存储空间

1.程序区

2.静态存储区

3.动态存储区

#### **局部变量的存储类别**

**1.自动变量（auto变量）**

在调用函数时，系统会给这些变量分配存储空间，在函数调用结束时就自动释放这些空间。这类局部变量叫做**自动变量**（auto变量生存期是从调用函数开始到释放变量空间为止）

**2.静态局部变量（static变量）**

用一个程序来说明static变量（生存期为从函数开始到函数结束）

```c
#include<stdio.h>
int main()
{
	int f(int a);
	{
		int a = 2, i;
		for (i = 0; i <= 4; i++)
			printf("%d \n", f(a));
		return 0;
	}
}

	int f(int a)
	{
		
		auto b = 0;//动态局部变量
		static c = 3;      //静态局部变量
		b++;
		c++;
		return(a + b + c);//程序一次循环结束后，b的值会被释放，回到b=0；而c不会，保留为c=4，在下次循环开始时，b=0，c=4
	}

```

静态局部变量属于静态存储类别，在**静态存储区**内分配单元

静态局部变量只在编译时赋初值，以后每次调用函数时不会再重新赋值，而是**使用上次调用函数结束时的值。**

**动态局部变量每调用一次函数就会自动给变量重新赋值，舍弃上次调用结束后的值**

备注：如果在定义局部变量时不赋初值的话，则对静态局部变量来说，编译时自动赋初值0或空字符‘\0’

3.**寄存器变量**

定义方式：

register int f

在执行变量使用频繁的程序中(如执行循环10000次，每次都要调用某局部变量)，使用寄存器可大大提升程序效率

#### 全局变量存储类别

全局变量都是存储在静态存储区的

1.entern声明外部变量扩展到程序文件中

```c
int a = 10;
等价于extern int a；
      a=10；
extern可在多文件编程中调用其它文件变量
例子：#include<stdio.h>
int main()
{
	extern int a;
	function();
	return 0;
}
int a;
void int function
{
	a = 2;
    printf("%d", a);
}
//输出a=2
```

2.static与entern区别：static定义和声明一个内部函数/变量

​                                        entern定义和声明一个外部函数/变量

**内部函数**

如果一个函数只能被**本文件中的其他函数所调用，称它为内部函数**

内部函数又被称为静态函数。

定义方法：static 类型标识符 函数名

{

函数体

}

使用内部函数可使函数的作用域只局限在所在的文件，在不同文件中同名的函数互不干扰

**外部函数**

如果一个函数可以被其他文件中的函数所调用，叫做外部函数

extrn（可省略） 类型标识符 函数名

{

函数体

}

**函数递归**

函数调用自己本身的过程叫做函数递归

递归里通常使用if来判定是否递归以及用循环来控制递归结束

例子：

```c
#include<stdio.h>

int function(int n)
{
    int i;
    if(n==0)
    {
    	i=1;
	}else{
		i=n*function(n-1);
	}
return i;
}
void main()
{
	int a;
	scanf("%d",&a);
	if(a<0){	
	printf("error\n");
}else{

	printf("%d",function(a)); 
     }
}
```

